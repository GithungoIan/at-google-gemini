# VoiceAI Application Configuration

akka {
  loglevel = "INFO"

  actor {
    provider = "local"

    default-dispatcher {
      type = "Dispatcher"
      executor = "fork-join-executor"

      fork-join-executor {
        parallelism-min = 8
        parallelism-factor = 3.0
        parallelism-max = 64
      }

      throughput = 5
    }
  }

  http {
    server {
      # Maximum number of open requests accepted across all materializations
      max-connections = 1024

      # Maximum number of requests that are accepted per connection
      pipelining-limit = 16

      # Backlog of TCP connections
      backlog = 100

      # Timeouts
      idle-timeout = 60 s
      request-timeout = 30 s
      bind-timeout = 1 s

      # Server header
      server-header = voiceai/1.0.0

      # Remote address header
      remote-address-header = on
    }

    client {
      connecting-timeout = 10 s
      idle-timeout = 60 s
    }

    host-connection-pool {
      max-connections = 100
      max-open-requests = 256
      idle-timeout = 30 s
    }
  }
}

voiceai {
  # Server configuration
  server {
    host = "0.0.0.0"
    host = ${?INTERFACE}
    port = 8080
    port = ${?PORT}
  }

  # Environment
  environment = "development"
  environment = ${?ENVIRONMENT}

  # Africa's Talking configuration
  africas-talking {
    api-key = ${?AT_API_KEY}
    username = ${?AT_USERNAME}
    base-url = "https://api.africastalking.com/version1"
  }

  # Google Gemini configuration
  gemini {
    api-key = ${?GEMINI_API_KEY}
    base-url = "https://generativelanguage.googleapis.com/v1beta"

    # Model configuration
    model = "gemini-pro"
    temperature = 0.7
    max-output-tokens = 150
    top-p = 0.8
    top-k = 40
  }

  # Session configuration
  sessions {
    # Call session timeout
    call-timeout = 5 minutes

    # SMS session timeout
    sms-timeout = 30 minutes
  }

  # Rate limiting
  rate-limiting {
    enabled = true
    max-requests = 10
    window = 1 minute
  }

  # Logging
  logging {
    structured = true
    level = "INFO"
    level = ${?LOG_LEVEL}
  }
}
